<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Deep-Insights.js | Populated Places (local)</title>
  <meta name=viewport content="width=device-width initial-scale=1">
  <link rel="stylesheet" href="../dist/themes/css/deep-insights.css" />
  <script src="../dist/deep-insights.uncompressed.js"></script>
  <style type="text/css">
    html, body {
      position:relative;
      height: 100%;
      padding: 0;
      margin: 0;
    }
  </style>
</head>
<body>
  <div class="Dashboard-canvas" id="dashboard"></div>

  <script>
    window.onload = function() {
      var diJSON = {
        "title": "NBA arenas areas of influence",
        "description": "The NBA Territory Analysis Tool will allow individual teams to analyze their current and potential marketing territories. Users can see visual reports and develop analyses on the fly.",
        "user": {
          "fullname": "Emilio García",
          "avatar_url": "https://s3.amazonaws.com/com.cartodb.users-assets.production/production/piensaenpixel/assets/20150507074635Captura%20de%20pantalla%202015-05-07%20a%20la%28s%29%2009.46.28.png"
        },
        "updated_at": "2015-10-26T11:50:30+00:00",

        "datasource": {
          "type": "public_map",
          "user_name": "cdb",
          "stat_tag": "ece6faac-7271-11e5-a85f-04013fc66a02",
          "maps_api_template": "http://{user}.localhost.lan:8181",
          "force_cors": true // This is sometimes set in the editor
        },

        "widgets": {
          "histogram_widget_pop_max": {
            "layerId": "4d82e8df-f21b-4225-b776-61b1bdffde6c",
            "type": "histogram",
            "title": "Population",
            "column": "pop_max",
            "bins": 10
          },
          'category_widget_adm0_a3': {
            "layerId": "4d82e8df-f21b-4225-b776-61b1bdffde6c",
            "type": "aggregation",
            "title": "Population by country",
            "column": "adm0name",
            "aggregation": "sum",
            "aggregationColumn": "pop_max"
          },
          'category_widget_labelrank': {
            "layerId": "4d82e8df-f21b-4225-b776-61b1bdffde6c",
            "type": "aggregation",
            "title": "Rank category",
            "column": "labelrank",
            "aggregation": "count"
          },
          "formula_widget_avg": {
            "layerId": "4d82e8df-f21b-4225-b776-61b1bdffde6c",
            "type": "formula",
            "title": "Avg population",
            "column": "pop_max",
            "operation": "avg"
          },
          "formula_widget_sum": {
            "layerId": "4d82e8df-f21b-4225-b776-61b1bdffde6c",
            "type": "formula",
            "title": "Total population",
            "column": "pop_max",
            "operation": "sum",
            "suffix": " people"
          },
          "formula_widget_count": {
            "layerId": "4d82e8df-f21b-4225-b776-61b1bdffde6c",
            "type": "formula",
            "title": "# places",
            "column": "pop_max",
            "operation": "count",
            "prefix": "$"
          },
          "formula_widget_min": {
            "layerId": "4d82e8df-f21b-4225-b776-61b1bdffde6c",
            "type": "formula",
            "title": "Min population",
            "column": "pop_max",
            "operation": "min"
          },
          "formula_widget_max": {
            "layerId": "4d82e8df-f21b-4225-b776-61b1bdffde6c",
            "type": "formula",
            "title": "Max population",
            "column": "pop_max",
            "operation": "max"
          }
        },

        "vizJSON": {
          "id": "84ec6844-4b4b-11e5-9c1d-080027880ca6",
          "version": "0.1.0",
          "likes": 0,
          "scrollwheel": false,
          "legends": true,
          "url": null,
          "map_provider": "leaflet",
          "bounds": [
            [
              -10.3967,
              -80.6479
            ],
            [
              60.2137,
              45.1867
            ]
          ],
          "center": "[40.7127, -74.0059]",
          "zoom": 4,
          "layers": [
            {
              "options": {
                "visible": true,
                "type": "Tiled",
                "name": "Positron",
                "className": "httpsbasemapscartocdncomlight_nolabelszxypng",
                "base_type": "default",
                "urlTemplate": "http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png",
                "minZoom": "0",
                "maxZoom": "18",
                "attribution": "© <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors © <a href= \"http://cartodb.com/attributions#basemaps\">CartoDB</a>",
                "subdomains": "abcd",
                "style": null,
                "labels": {
                  "url": "http://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png"
                },
                "read_only": true,
                "category": "CartoDB",
                "order": 0,
                "id": "a4b5985f-5757-4ff3-8957-01e41247318c",
                "parent_id": null
              },
              "infowindow": null,
              "tooltip": null,
              "id": "a4b5985f-5757-4ff3-8957-01e41247318c",
              "order": 0,
              "type": "tiled"
            },
            {
              "type": "layergroup",
              "options": {
                "user_name": "rochoa-st-ded02",
                "maps_api_template": "https://{user}.cartodb-staging.com:443",
                "layer_definition": {
                  "stat_tag": "84ec6844-4b4b-11e5-9c1d-080027880ca6",
                  "version": "1.0.1",
                  "layers": [
                    {
                      "id": "4d82e8df-f21b-4225-b776-61b1bdffde6c",
                      "type": "CartoDB",
                      "interactivity": "cartodb_id,adm0_a3,name,pop_max",
                      "infowindow": {
                        "fields": [],
                        "template_name": "table/views/infowindow_light",
                        "template": "<div class=\"cartodb-popup v2\">\n  <a href=\"#close\" class=\"cartodb-popup-close-button close\">x</a>\n  <div class=\"cartodb-popup-content-wrapper\">\n    <div class=\"cartodb-popup-content\">\n      {{#content.fields}}\n        {{#title}}<h4>{{title}}</h4>{{/title}}\n        {{#value}}\n          <p {{#type}}class=\"{{ type }}\"{{/type}}>{{{ value }}}</p>\n        {{/value}}\n        {{^value}}\n          <p class=\"empty\">null</p>\n        {{/value}}\n      {{/content.fields}}\n    </div>\n  </div>\n  <div class=\"cartodb-popup-tip-container\"></div>\n</div>\n",
                        "alternative_names": {},
                        "width": 226,
                        "maxHeight": 180
                      },
                      "tooltip": {
                        "fields": [
                          {
                            "name": "adm0_a3",
                            "title": true,
                            "position": 1
                          },
                          {
                            "name": "name",
                            "title": true,
                            "position": 2
                          },
                          {
                            "name": "pop_max",
                            "title": true,
                            "position": 3
                          }
                        ],
                        "template_name": "tooltip_light",
                        "template": "<div class=\"cartodb-tooltip-content-wrapper\">\n  <div class=\"cartodb-tooltip-content\">\n  {{#fields}}\n    {{#title}}\n    <h4>{{title}}</h4>\n    {{/title}}\n    <p>{{{ value }}}</p>\n  {{/fields}}\n  </div>\n</div>",
                        "alternative_names": {},
                        "maxHeight": 180
                      },
                      "legend": {
                        "type": "none",
                        "show_title": false,
                        "title": "",
                        "template": "",
                        "visible": true
                      },
                      "order": 1,
                      "visible": true,
                      "options": {
                        "sql": "select * from ne_10m_populated_places_simple",
                        "layer_name": "Populated places",
                        "cartocss": "/** simple visualization */\n\n#layer{\n marker-fill-opacity: 0.9;\n  marker-line-color: #FFF;\n  marker-line-width: 0.6;\n  marker-line-opacity: 1;\n  marker-placement: point;\n  marker-type: ellipse;\n  marker-width: 8;\n  marker-fill: green;\n  marker-allow-overlap: true;\n}",
                        "cartocss_version": "2.1.1",
                        "interactivity": "cartodb_id,adm0_a3,name,pop_max",
                        "table_name": "\"\".",
                      }
                    }
                  ]
                },
                "attribution": "wadus"
              }
            },
            {
              "options": {
                "visible": true,
                "type": "Tiled",
                "name": "Positron Labels",
                "urlTemplate": "http://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png",
                "attribution": "© <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors © <a href= \"http://cartodb.com/attributions#basemaps\">CartoDB</a>",
                "minZoom": "0",
                "maxZoom": "18",
                "subdomains": "abcd",
                "kind": "tiled",
                "order": 4,
                "id": "2045d4f7-7a76-4b41-8acf-88e32ac49370",
                "className": "httpsbasemapscartocdncomlight_only_labelszxypng",
                "parent_id": null
              },
              "infowindow": null,
              "tooltip": null,
              "id": "2045d4f7-7a76-4b41-8acf-88e32ac49370",
              "order": 4,
              "type": "tiled"
            }
          ],
          "overlays": [
            {
              "type": "share",
              "order": 2,
              "options": {
                "display": true,
                "x": 20,
                "y": 20
              },
              "template": ""
            },
            {
              "type": "search",
              "order": 3,
              "options": {
                "display": true,
                "x": 60,
                "y": 20
              },
              "template": ""
            },
            {
              "type": "zoom",
              "order": 6,
              "options": {
                "display": true,
                "x": 20,
                "y": 20
              },
              "template": "<a href=\"#zoom_in\" class=\"zoom_in\">+</a> <a href=\"#zoom_out\" class=\"zoom_out\">-</a>"
            },
            {
              "type": "loader",
              "order": 8,
              "options": {
                "display": true,
                "x": 20,
                "y": 150
              },
              "template": "<div class=\"loader\" original-title=\"\"></div>"
            },
            {
              "type": "logo",
              "order": 9,
              "options": {
                "display": true,
                "x": 10,
                "y": 40
              },
              "template": ""
            }
          ],
          "prev": null,
          "next": null,
          "transition_options": {
            "time": 0
          }
        }
      };

      cartodb.deepInsights.createDashboard('#dashboard', diJSON, {
        no_cdn: false,
      });
    }
  </script>
</body>
</html>
